#!/usr/bin/python3

#
# Copyright (C) 2022 Nethesis S.r.l.
# SPDX-License-Identifier: GPL-2.0-only
#

import nsmigration
from nextsec import firewall, utils

(u, data, nmap) = nsmigration.init("routes.json")

counter = len(data['routes'])

for route in data['routes']:
    rname = utils.get_id(f'route{counter}')
    nsmigration.vprint(f'Creating route {rname}')
    route['interface'] = utils.get_interface_from_mac(u, nsmigration.remap(route['interface'], nmap))
    u.set("network", rname, "route")
    for option in route:
        u.set("network", rname, option, route[option])

# Save configuration
u.commit("network")
